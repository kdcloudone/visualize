@ease-out: cubic-bezier(0, 0.4, 0.4, 1);
@ease-in: cubic-bezier(0.4, 0, 1, 0.6);
@ease: cubic-bezier(0.4, 0, 0.6, 1);
@radius-border: 2px;
@color-white: #fff;

.popperArrow(@popperBg, @offset, @blur) {
  &.arrow {
    &::before {
      position: absolute;
      z-index: -2;
      background: transparent;
      border-style: solid;
      border-width: var(--arrowSize);
      transform: rotate(45deg);
      content: '';
    }

    &::after {
      position: absolute;
      z-index: -1;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      content: '';
      background: @popperBg;
      border-radius: @radius-border;
    }

    &.bottomLeft,
    &.bottom,
    &.bottomRight {
      &::before {
        left: var(--arrowLeft);
        top: var(--arrowSpill);
        box-shadow: -2px -2px calc(@blur - 1px) rgba(0, 0, 0, 0.1);
        border-color: #fff transparent transparent #fff;
      }
    }

    &.topLeft,
    &.top,
    &.topRight {
      &::before {
        left: var(--arrowLeft);
        bottom: var(--arrowSpill);
        box-shadow: 3px 3px calc(@blur + 1px) rgba(0, 0, 0, 0.15);
        border-color: transparent @color-white @color-white transparent;
      }
    }

    &.leftTop,
    &.left,
    &.leftBottom {
      &::before {
        top: var(--arrowTop);
        right: var(--arrowSpill);
        box-shadow: 3px 0 @blur rgba(0, 0, 0, 0.12),
          0 -2px @blur rgba(204, 149, 149, 0.12);
        border-color: @color-white @color-white transparent transparent;
      }
    }

    &.rightTop,
    &.right,
    &.rightBottom {
      &::before {
        top: var(--arrowTop);
        left: var(--arrowSpill);
        box-shadow: 0 3px @blur rgba(0, 0, 0, 0.1),
          -2px 0 @blur rgba(0, 0, 0, 0.1);
        border-color: transparent transparent @color-white @color-white;
      }
    }
  }
}

.zoom-motion(@className, @keyframeName, @duration: 0.2) {
  .@{className} {
    &-active {
      animation-name: ~'@{keyframeName}In';
      animation-duration: @duration;
      animation-timing-function: @ease-out;
    }

    &.hidden {
      animation-name: ~'@{keyframeName}Out';
      animation-duration: 0.1s;
      animation-timing-function: @ease-in;
    }
  }
}

.zoom-motion(top, kdZoomBottom);
.zoom-motion(left, kdZoomRight);
.zoom-motion(right, kdZoomLeft);
.zoom-motion(bottom, kdZoomTop);

.zoom-motion(topLeft, kdZoomLeftBottom);
.zoom-motion(rightBottom, kdZoomLeftBottom);

.zoom-motion(topRight, kdZoomRightBottom);
.zoom-motion(leftBottom, kdZoomRightBottom);

.zoom-motion(leftTop, kdZoomTopRight);
.zoom-motion(bottomRight, kdZoomTopRight);

.zoom-motion(rightTop, kdZoomTopLeft);
.zoom-motion(bottomLeft, kdZoomTopLeft);

@keyframes kdZoomBottomIn {
  0% {
    opacity: 0;
  }
  5% {
    transform: scale(0.6);
    transform-origin: 50% 100%;
  }
  100% {
    transform: scale(1);
    transform-origin: 50% 100%;
    opacity: 1;
  }
}

@keyframes kdZoomBottomOut {
  0% {
    transform: scale(1);
    transform-origin: 50% 100%;
    opacity: 1;
  }
  100% {
    transform: scale(0.6);
    transform-origin: 50% 100%;
    opacity: 0;
  }
}

@keyframes kdZoomRightIn {
  0% {
    opacity: 0;
  }
  5% {
    transform: scale(0.6);
    transform-origin: 100% 50%;
  }
  100% {
    transform: scale(1);
    transform-origin: 100% 50%;
    opacity: 1;
  }
}

@keyframes kdZoomRightOut {
  0% {
    transform: scale(1);
    transform-origin: 100% 50%;
    opacity: 1;
  }
  100% {
    transform: scale(0.6);
    transform-origin: 100% 50%;
    opacity: 0;
  }
}

@keyframes kdZoomTopIn {
  0% {
    opacity: 0;
  }
  5% {
    transform: scale(0.6);
    transform-origin: 50% 0%;
  }
  100% {
    transform: scale(1);
    transform-origin: 50% 0%;
    opacity: 1;
  }
}

@keyframes kdZoomTopOut {
  0% {
    transform: scale(1);
    transform-origin: 50% 0%;
    opacity: 1;
  }
  100% {
    transform: scale(0.6);
    transform-origin: 50% 0%;
    opacity: 0;
  }
}

@keyframes kdZoomLeftIn {
  0% {
    opacity: 0;
  }
  5% {
    transform: scale(0.6);
    transform-origin: 0% 50%;
  }
  100% {
    transform: scale(1);
    transform-origin: 0% 50%;
    opacity: 1;
  }
}

@keyframes kdZoomLeftOut {
  0% {
    transform: scale(1);
    transform-origin: 0% 50%;
    opacity: 1;
  }
  100% {
    transform: scale(0.6);
    transform-origin: 0% 50%;
    opacity: 0;
  }
}

@keyframes kdZoomLeftBottomIn {
  0% {
    opacity: 0;
  }
  5% {
    transform: scale(0.6);
    transform-origin: 0% 100%;
  }
  100% {
    transform: scale(1);
    transform-origin: 0% 100%;
    opacity: 1;
  }
}

@keyframes kdZoomLeftBottomOut {
  0% {
    transform: scale(1);
    transform-origin: 0% 100%;
    opacity: 1;
  }
  100% {
    transform: scale(0.6);
    transform-origin: 0% 100%;
    opacity: 0;
  }
}

@keyframes kdZoomRightBottomIn {
  0% {
    opacity: 0;
  }
  5% {
    transform: scale(0.6);
    transform-origin: 100% 100%;
  }
  100% {
    transform: scale(1);
    transform-origin: 100% 100%;
    opacity: 1;
  }
}

@keyframes kdZoomRightBottomOut {
  0% {
    transform: scale(1);
    transform-origin: 100% 100%;
    opacity: 1;
  }
  100% {
    transform: scale(0.6);
    transform-origin: 100% 100%;
    opacity: 0;
  }
}

@keyframes kdZoomTopRightIn {
  0% {
    opacity: 0;
  }
  5% {
    transform: scale(0.6);
    transform-origin: 100% 0%;
  }
  100% {
    transform: scale(1);
    transform-origin: 100% 0%;
    opacity: 1;
  }
}

@keyframes kdZoomTopRightOut {
  0% {
    transform: scale(1);
    transform-origin: 100% 0%;
    opacity: 1;
  }
  100% {
    transform: scale(0.6);
    transform-origin: 100% 0%;
    opacity: 0;
  }
}

@keyframes kdZoomTopLeftIn {
  0% {
    opacity: 0;
  }
  5% {
    transform: scale(0.6);
    transform-origin: 0% 0%;
  }
  100% {
    transform: scale(1);
    transform-origin: 0% 0%;
    opacity: 1;
  }
}

@keyframes kdZoomTopLeftOut {
  0% {
    transform: scale(1);
    transform-origin: 0% 0%;
    opacity: 1;
  }
  100% {
    transform: scale(0.6);
    transform-origin: 0% 0%;
    opacity: 0;
  }
}

.kd-customer {
  opacity: 1;
  z-index: 2000;
  visibility: visible;
  border-radius: 0;

  &.arrow::after {
    border-radius: 8px !important;
  }

  &.hidden {
    opacity: 0;
    visibility: hidden;
  }

  // 箭头样式
  .popperArrow(#fff, 12px, 6px);
}
